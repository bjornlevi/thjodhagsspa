# pipeline/recipes.yaml
recipes:
  # --- 2015 (spring) ---
  - match: "spa_2015_april_vor.pdf"
    page_hints: [5, 6]                         # 1-based human pages to try first
    caption_regex: "^Tafla\\s*1\\..*Landsframleiðsla"
    required_years: [2014, 2015, 2016, 2017]
    min_label_hits: 12                         # # of target indicators found in the table’s first columns
    stitch_continuations: 2                    # join up to 2 numeric-only rows after a label
    prefer_percenty: true                      # prefer tables where values look like percentages

  # --- 2015 (winter) ---
  - match: "spa_2015_november_vetur.pdf"
    page_hints: [5, 6]
    caption_regex: "^Tafla\\s*1\\..*Landsframleiðsla"
    required_years: [2014, 2015, 2016, 2017]
    min_label_hits: 12
    stitch_continuations: 2
    prefer_percenty: true

  # --- 2010 (June forecast 2010–2015) ---
  - match: "spa_2010_juni_spa_2010_2015.pdf"
    page_hints: [4, 5, 6]
    caption_regex: "^Tafla\\s*4\\..*Landsframleiðsla"   # this PDF’s correct table is often Tafla 4
    required_years: [2009, 2010, 2011, 2012, 2013, 2014, 2015]
    min_label_hits: 12
    stitch_continuations: 2
    prefer_percenty: true

  # --- 2021 (winter/autumn) ---
  - match: "spa_2021_november_vetur_haust.pdf"
    page_hints: [6, 7, 8]
    caption_regex: "^Tafla\\s*1\\..*Landsframleiðsla"
    required_years: [2020, 2021, 2022, 2023, 2024]
    min_label_hits: 14
    stitch_continuations: 1
    prefer_percenty: true

  # --- 2022 (winter/autumn) — graphs at the end can confuse detection ---
  - match: "spa_2022_november_vetur_haust.pdf"
    page_hints: [6, 7, 8]
    caption_regex: "^Tafla\\s*1\\..*Landsframleiðsla"
    required_years: [2021, 2022, 2023, 2024]
    min_label_hits: 14
    stitch_continuations: 1
    prefer_percenty: true

  # -------- default “fallback” tuning (optional) --------
  - match: "*"                                  # applies to anything not matched above
    page_hints: []                              # try all pages
    caption_regex: "Tafla\\s*\\d+\\..*Landsframleiðsla"
    required_years: []                           # no strict year set
    min_label_hits: 10
    stitch_continuations: 1
    prefer_percenty: true
